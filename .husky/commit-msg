
# ============================================
# COMMIT MESSAGE VALIDATION HOOK
# ============================================
# This hook validates commit messages against
# the Conventional Commits specification.
# ============================================

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘   ğŸ“‹ Validating Commit Message...     â•‘"
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo ""

# Run commitlint to validate the commit message
pnpm exec commitlint --edit $1

COMMITLINT_EXIT_CODE=$?

if [ $COMMITLINT_EXIT_CODE -ne 0 ]; then
  echo ""
  echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
  echo "â•‘  âŒ COMMIT MESSAGE VALIDATION FAILED                               â•‘"
  echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
  echo ""
  echo "ğŸ“– Commit Message Format:"
  echo "   <type>(<scope>): <subject>"
  echo ""
  echo "   [optional body]"
  echo ""
  echo "   [optional footer]"
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  echo "ğŸ“ Examples of VALID commit messages:"
  echo ""
  echo "   âœ… feat(api): add pricing comparison endpoint"
  echo "   âœ… fix(web): resolve navigation bug on mobile devices"
  echo "   âœ… docs(readme): update installation instructions"
  echo "   âœ… refactor(pricing): simplify price calculation logic"
  echo "   âœ… perf(database): optimize query performance for large datasets"
  echo "   âœ… test(benchmarks): add unit tests for benchmark service"
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  echo "ğŸ·ï¸  Available Types:"
  echo "   â€¢ feat       - âœ¨ New feature"
  echo "   â€¢ fix        - ğŸ› Bug fix"
  echo "   â€¢ hotfix     - ğŸš‘ Critical hotfix"
  echo "   â€¢ docs       - ğŸ“ Documentation"
  echo "   â€¢ style      - ğŸ’„ Formatting (no code change)"
  echo "   â€¢ refactor   - â™»ï¸  Code refactoring"
  echo "   â€¢ perf       - âš¡ Performance improvement"
  echo "   â€¢ test       - âœ… Tests"
  echo "   â€¢ build      - ğŸ“¦ Build system"
  echo "   â€¢ ci         - ğŸ‘· CI/CD"
  echo "   â€¢ chore      - ğŸ”§ Maintenance"
  echo "   â€¢ revert     - âª Revert commit"
  echo "   â€¢ security   - ğŸ”’ Security"
  echo "   â€¢ deps       - â¬†ï¸  Dependencies"
  echo "   â€¢ config     - âš™ï¸  Configuration"
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  echo "ğŸ¯ Available Scopes:"
  echo "   Core: api, web, frontend, monorepo, workspace"
  echo "   Services: benchmarks, capability-matching, model-catalog, pricing, suggestions"
  echo "   Frontend: components, pages, layout, hooks, utils, types"
  echo "   Infra: database, prisma, docker, deployment"
  echo "   Tooling: husky, eslint, typescript, tests, ci, build, deps, config"
  echo "   Docs: docs, readme"
  echo "   Release: release, changelog"
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  echo "ğŸ“ Requirements:"
  echo "   â€¢ Subject: 10-72 characters, lowercase, no period at end"
  echo "   â€¢ Header: 15-100 characters total"
  echo "   â€¢ Use imperative mood (\"add\" not \"added\" or \"adds\")"
  echo "   â€¢ Separate body/footer with blank line"
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  echo "ğŸ“š For more details, see: GIT_HOOKS.md"
  echo ""
  echo "ğŸ’¡ Tip: Use 'git commit' without -m to open editor for detailed messages"
  echo ""
  exit 1
fi

echo ""
echo "âœ… Commit message is valid!"
echo ""
